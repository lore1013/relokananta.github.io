<!DOCTYPE html>

<!-- #BeginTemplate "00Vorlage.dwt" -->

<html>

<head>
<meta content="de" http-equiv="Content-Language">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="description" content="Methodisches Entwickeln von Projekten">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="keywords" content="Informationstechnik, Signale, Systeme, Projekte, Technik, 3D, Mikrocontroller" />
<script type="text/javascript">
		var project = window.location.pathname;
	</script>
	<noscript>Prof. J. Walter - Informationstechnik, Mikrocomputertechnik, Digitale Medien </noscript>

<!-- #BeginEditable "doctitle" -->
<title>Softwaredoku</title>
<style type="text/css">

































































.auto-style21 {
	border-width: 0px;
}
.auto-style24 {
	border: 15px solid #FFFFFF;
	font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
	font-size: medium;
	background-color: #F2F2F2;
	min-height: 600px;
	text-align: left;
}
.auto-style25 {
	text-decoration: underline;
}
.auto-style26 {
	color: #008000;
}
.auto-style27 {
	color: #238B19;
}
</style>
<!-- #EndEditable -->
<link href="highlight/styles/default.css" rel="stylesheet">
<script src="highlight/to/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="CSS/Design.css" media="screen" rel="stylesheet" type="text/css" />
<link href="CSS/default.css" media="print" rel="stylesheet" type="text/css" />
<style type="text/css">

.auto-style19 {
	border-width: 0px;
	vertical-align: middle;
	background-color:white;
}
a {
	color: #000000;
}
a:visited {
	color: #000000;
}
a:active {
	color: #E1003C;
}
.auto-style21 {
	font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
	color: #FFFFFF;
	text-align: center;
	background-color: #FFFFFF;
}
.auto-style22 {
	text-align: center;
	color: #000000;
	font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
}
.auto-style23 {
	font-size: x-large;
}
</style>
</head>

<body>

<div class="header" style="z-index: 100">
	<div class="top" style="height: 150px">
		<table  style="width: 100%; height: 150px;">
			<tr>
				<td class="auto-style21" style="width: 28%; height: 44px;">
				<a href="http://www.hs-karlsruhe.de/" target="_blank">
				<img alt="Hochschule Karlsruhe Logo" class="auto-style19" height="92" src="images/Hska_logo.png" style="float: left" width="277"></a></td>
				<td class="auto-style2" style="height: 100px">
				<span class="auto-style3"><strong>
				Informationstechnik</strong></span><br class="auto-style3">
				<span class="auto-style3"><strong>LED-App</strong></span></td>
				<td class="auto-style6" style="width: 30%; height: 44px;">
				<strong>Wintersemester 2020<br></strong>
				<a href="mailto:pran1015@hs-karlsruhe.de?subject=LED-App">
				pran1015@hs-karlsruhe.de</a><br>
				<a href="mailto:lore10103@hs-karlsruhe.de?subject=LED-App">
				lore1013@hs-karlsruhe.de</a></td>
			</tr>
			<tr>
				<td colspan="3" style="height: 50px;" >
				<ul>
					<li><a href="index.html">Startseite</a></li>
					<li><a href="0101team.html">Team</a></li>
					<li class="dropdown"><span>
					<a class="dropbtn" href="0201Vorwort.html" >Definitionsphase</a></span>
					<div class="dropdown-content">
						<a href="0201Vorwort.html">Vorwort</a>
						<a href="0202Problemstellung.html">Problemstellung</a>
						<a href="0203StandDerTechnik.html">Stand der Technik</a>
						<a href="0204Aufgabenstellung.html">Aufgabenstellung</a>
						<a href="0205Mindmap.html">Mindmap</a>
						<a href="0206ProjektplanIST.html">ProjektplanIST</a>
						<a href="0207anforderungsliste.html">Anforderungsliste</a>
						
					</div>
					<div>
					</div>
					</li>
					<li class="dropdown"><span>
					<a class="dropbtn" href="0301Blackbox.html">Konzeptphase</a></span>
					<div class="dropdown-content">
						<a href="0301Blackbox.html">Black-Box</a>
						<a href="0302Funktionsstruktur.html">Funktionsstruktur</a>
						<a href="0303Morphologie.html">Morphologie</a>
						<a href="0304VorteileNachteile.html">Vorteile/Nachteile</a>
						<a href="0305Loesungsalternativen.html">Lösungsalternativen</a>
						<a href="0306Ranking.html">Ranking</a>
						<a href="0307VerfahrensmatrixNWA.html">Verfahrensmatrix NWA</a>
						<a href="0308ErgebnisNWA.html">Ergebnis der Nutzwertanalyse</a>
						<a href="0309Konzeptentwicklung.html">Konzeptentwicklung</a>
						<a href="0310Bestellliste.html">Bestellliste</a>
					</div>
					<div>
					</div>
					</li>
					<li class="dropdown"><span>
					<a class="dropbtn" href="0401AusgewaehlteLoesung.html">Ausarbeitung</a></span>
					<div class="dropdown-content">
						<a href="0401AusgewaehlteLoesung.html">Ausgewählte Lösung</a>
						<a href="0402Blockschaltbild.html">Blockschaltbild</a>
						<a href="0403Softwaredoku.html">Software Dokumentation</a>
						<a href="0404Portbelegungsplan.html">Portbelegungsplan</a>
						<a href="0405Schaltplan.html">Schaltplan</a>
						<a href="0406Layout.html">Layout</a>
						<a href="0407Quellcode.html">Quellcode</a>
						<a href="0408Mechanik.html">Mechanik</a>
						<a href="04093D-Druck.html">3-D-Druck</a>
						<a href="0410Bedienungsanleitung.html">Bedienungsanleitung</a>
						<a href="0411Weiterentwicklung.html">Weiterentwicklungen</a>
						<a href="0412Linkliste.html">Linkliste</a>
						<a href="0413Fazit.html">Fazit</a>
						<a href="0414Anhang.html">Anhang</a>
						<a href="0415Protokolle.html">Protokolle</a> </div>
					</li>
				</ul>
				</td>
			</tr>
		</table>
	</div>
</div>
<div class="auto-style2" style="overflow: hidden; margin: 0 auto; width: 1000px; top: 150px; position: relative; left: 0px;">
	<table  class="auto-style10" style="width: 100%">
		<tr>
			<td class="auto-style15" style="height: 0px">
			<table  style="width: 970px">
				<tr>
					<td style="width: 30px; height: 0px;">
					<!-- #BeginEditable "NaviVorher" -->
					<p>					<a href="0402Blockschaltbild.html">					
					<img alt="" height="32" src="images/back_active.png" width="32" class="auto-style21"></a></p>
<!-- #EndEditable -->
					</td>
					<td class="auto-style2" style="width: 900px; height: 36px;">
					<!-- #BeginEditable "Ueberschrift_Navi" -->
					
					<strong>Software Dokumentation</strong><!-- #EndEditable --></td>
					
					
					<td style="width: 30px; height: 36px;" class="auto-style2"><!-- #BeginEditable "NaviNachher" -->
					<p>
					<a href="0404Portbelegungsplan.html">
					<img alt="" height="32" src="images/next_active.png" width="32" class="auto-style21"></a></p>
<!-- #EndEditable -->
					</td>
					
					
				</tr>
			</table>
			</td>
		</tr>
		<tr>
			<td class="auto-style24" style="height: 600px;">
			<!-- #BeginEditable "Inhalt" -->An dieser Stelle wird die 
			Funktionsweise des Programms zur Messung der 3 Bibliotheken 
			beschrieben.<br><br><br>Das Programm muss folgende leisten:<br>1. 
			Ansteuerung des LED-Rings.<br>2. Abfragen der Zeit und 
			Prozessorauslastung (in Prozent) von den laufenden Aufgaben.<br><br>
			<span class="auto-style25"><strong>1.&nbsp; Ansterung des LED-Rings.</strong></span><br>
			Beim ESP32 wird jede Millisekunde eine zusätzliche Verzögerung von 
			etwa 5 Mikrosekunden in den Signalausgang eingefügt. Dies liegt weit 
			außerhalb der Neopixel-Timing-Toleranz von 150 ns, sodass es in 
			einigen Pixeln zu falschen Werten kommt. Damit der LED_Ring die 
			gewünschte Farbe korrekt anzeigt, es gibt eine Sache die wir ändern 
			müssen und zwar wir sollen in jeder Bibliothek als GRBW schicken.<br>
			<br>Der Quellcode wurde so geschrieben, dass er lessbar ist und wenn 
			möglich die eingebauten Bibliothekensfunktionen verwenden. In diesem 
			Versuch haben wir 2 LEDs-Rings zwar 16 LEDs und 12 LEDs angesteuert. 
			Die Funktion zur Ansteuerung wurde es direkt mit einer for-Schleife 
			und selbst geschriebene Funktion gemacht, hier verglichen wir die 
			Zeit, wenn direkt alle LEDs angemacht werden und wenn einzelne LED 
			bis alle LEDs angemacht wird. Unten steht das Beispiel mit dem 
			Bibliothek Adafruit_Neopixel.<br>void TurnOn( void )<br>{<br>
			<span class="auto-style26">&nbsp;&nbsp;&nbsp; // For a set of 
			NeoPixels the first NeoPixel is 0, second is 1, all the way up to 
			the count of pixels minus one.</span><br class="auto-style26">
			<span class="auto-style26">&nbsp;&nbsp;&nbsp; // pixels.Color takes 
			RGB values, from 0,0,0 up to 255,255,255</span><br>&nbsp;&nbsp;&nbsp; 
			for(i=0; i&lt;NUMPIXELS; i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			pixels.setPixelColor(i, Blue); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			pixels.show(); <br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; 
			delay(1000);<br>} <br><br>Der Unterschied liegt an der Position der 
			Delay-Function, das obige Beispiel macht alle LEDs an.<br><br><br>
			<span class="auto-style25"><strong>2. Abfragen der Ausführungszeit 
			und Prozessorauslastung (in Prozent) von den laufenden 
			Tasks/Threads.</strong></span><br>Die Messung lassen wir in einem 
			anderem Thread laufen, sodass jede Task seine eigene Aufgabe hat.<br>
			<br>char buffer[1024];&nbsp;&nbsp; <span class="auto-style27">//ein 
			Buffer für die Rückgabe von Funktion "vTaskGetRunTime"</span><br>
			<br>unsigned int delayTime;&nbsp;&nbsp;&nbsp;
			<span class="auto-style27">// Variable für die Intervall der Ausgabe 
			von Prozessorauslast(runtimestats)</span><br>void time_stats(void* 
			pvparam){<br>&nbsp;&nbsp;&nbsp; int j = 1;<br>&nbsp;&nbsp;&nbsp; 
			while(1)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			printf("\nMessung :%d\n", j); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			vTaskGetRunTimeStats(buffer);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			printf("| Task | Run Time | Percentage\n");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			printf("\n%s",buffer);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			j++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			//printf("pvparam: %d",(*(int*)pvparam));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			vTaskDelay((*(int*)pvparam)/portTICK_PERIOD_MS);&nbsp;&nbsp;
			<span class="auto-style27">//delay mit eingegebene Parameter(in ms)</span><br>&nbsp;&nbsp;&nbsp; 
			}<br>&nbsp;&nbsp;&nbsp; vTaskDelete(NULL);<br>}<br><br>void 
			get_CPU(int pms){<br>&nbsp;&nbsp;&nbsp; delayTime = pms;<br>&nbsp;&nbsp;&nbsp; 
			//printf("delay:%d",delay);<br>&nbsp;&nbsp;&nbsp; 
			xTaskCreatePinnedToCore(time_stats,"get_CPU",4096,(void*)&amp;delayTime,3,NULL,0);&nbsp;
			<span class="auto-style27">//Neue Task für runtimestats erstellen</span><br>
			}<br><br>
			<br>Die Interval für die Ausgabe der Prozessorauslast ist 
			einstellbar("get_CPU(delay_in_ms)").<br>
			<br><br><br><br><!-- #EndEditable --></td>
		</tr>
	</table>
	<br></div>
<div style="height: 5px; overflow: hidden; margin: 0 auto; width: 800px; top: 150px; position: relative; left: 0px;">
</div>
<div class="bottom" style="overflow: hidden; margin: 0 auto; width: 100%; top: 150px; position: relative; left: 0px; height: 28px;">
	<table style="width: 100%" >
		<tr>
			<td class="auto-style4" style="height: 25px; width: 395px;">&nbsp;</td>
			<td class="auto-style22" style="width: 50%; height: 25px;">
			Mit Unterstützung von Prof. J. Walter</td>
			<td class="auto-style22" style="width: 50%; height: 25px;">
			<strong>Wintersemester 2020</strong></td>
			<td class="auto-style5" style="width: 50%; height: 25px;">&nbsp;</td>
		</tr>
	</table>
	<br></div>

</body>

</html>
